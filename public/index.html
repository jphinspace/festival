<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Festival Agent Simulation</title>
    <meta name="description" content="Agent-based simulation of attendees at a music festival">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="container">
        <div id="controls">
            <button id="pauseBtn" class="pause" aria-pressed="false" aria-label="Pause simulation">Pause</button>
            <button id="leftConcertBtn" aria-label="Start concert on left stage in 5 minutes">Left Concert (5 min)</button>
            <button id="rightConcertBtn" aria-label="Start concert on right stage in 5 minutes">Right Concert (5 min)</button>
            <button id="carArriveBtn" aria-label="Car arrives with one attendee">Car Arrive</button>
            <button id="busArriveBtn" aria-label="Bus arrives with new attendees">Bus Arrives</button>
            <button id="busLeaveBtn" aria-label="Bus leaving, attendees can depart">Bus Leaving</button>
            <button id="showPathsBtn" aria-pressed="false" aria-label="Show all waypoint paths">Show All Paths</button>
            <div class="speed-control">
                <label for="speedSlider">Speed:</label>
                <input 
                    type="range" 
                    id="speedSlider" 
                    min="4.0" 
                    max="80.0" 
                    step="1.0" 
                    value="40.0"
                    aria-label="Simulation speed"
                    aria-valuemin="4.0"
                    aria-valuemax="80.0"
                    aria-valuenow="40.0"
                    aria-valuetext="1.0x speed"
                >
                <span class="speed-value" id="speedValue" aria-live="polite">1.0x</span>
            </div>
        </div>
        <div id="info" role="status" aria-live="polite">
            <span id="attendeeCount">Attendees: 0</span>
            <span id="fps">FPS: 0</span>
        </div>
        <div id="metrics" role="region" aria-label="Festival metrics">
            <div class="metrics-section">
                <h3>Queue Wait Times</h3>
                <div class="metric-row">
                    <span class="metric-label">In Queue:</span>
                    <span class="metric-value">
                        Avg: <span id="inQueueAvg">0ms</span> | 
                        Med: <span id="inQueueMedian">0ms</span> | 
                        Max: <span id="inQueueMax">0ms</span>
                    </span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">Approaching:</span>
                    <span class="metric-value">
                        Avg: <span id="approachingAvg">0ms</span> | 
                        Med: <span id="approachingMedian">0ms</span> | 
                        Max: <span id="approachingMax">0ms</span>
                    </span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">Re-entering:</span>
                    <span class="metric-value">
                        Avg: <span id="reenteringAvg">0ms</span> | 
                        Med: <span id="reenteringMedian">0ms</span> | 
                        Max: <span id="reenteringMax">0ms</span>
                    </span>
                </div>
            </div>
            <div class="metrics-section">
                <h3>Current State</h3>
                <div class="metric-row">
                    <span class="metric-label">Fans in Queue:</span>
                    <span class="metric-value" id="fansInQueue">0</span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">Fans Approaching:</span>
                    <span class="metric-value" id="fansApproachingQueue">0</span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">At Max Hunger:</span>
                    <span class="metric-value" id="fansAtMaxHunger">0.0%</span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">Stuck Fans:</span>
                    <span class="metric-value" id="stuckFans">0</span>
                </div>
            </div>
            <div class="metrics-section">
                <h3>Hunger Levels</h3>
                <div class="metric-row">
                    <span class="metric-label">Average:</span>
                    <span class="metric-value" id="hungerAvg">0.0%</span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">Median:</span>
                    <span class="metric-value" id="hungerMedian">0.0%</span>
                </div>
            </div>
        </div>
        <div id="canvas-container">
            <canvas id="canvas" role="img" aria-label="Festival simulation visualization"></canvas>
        </div>
    </div>

    <script type="module" src="../src/app.js"></script>
</body>
</html>
